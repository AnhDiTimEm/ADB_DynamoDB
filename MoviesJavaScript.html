<html>
<head>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.579.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js" ></script>
<script type="text/javascript" src="./javascript/importJson.js"></script>
<script type="text/javascript" src="./javascript/crudOperations.js" async></script>
<script type="text/javascript" src="./javascript/queryAndScan.js" async></script>
<script type="text/javascript" src="./javascript/tableOperations.js" async></script>
<script type="text/javascript">
AWS.config.update({
  region: "us-east-2",
  // The endpoint should point to the local or remote computer where DynamoDB (downloadable) is running.
  endpoint: 'http://localhost:8000',
  /*
    accessKeyId and secretAccessKey defaults can be used while using the downloadable version of DynamoDB. 
    For security reasons, do not store AWS Credentials in your files. Use Amazon Cognito instead.
  */
  accessKeyId: "AKIAI56HIQWXQ3VHP5JA",
  secretAccessKey: "dvpetuournZbhU7TFLL4ze6TsTEWDUSuGcDC0wOK"
});

var dynamodb = new AWS.DynamoDB();
var docClient = new AWS.DynamoDB.DocumentClient();

function myFunction(infor) {
  var table = document.getElementById("myTable");
  var info=document.getElementById('newInfo').value;
table.insertRow(table.rows.length).innerHTML="<tr><td>"+info+"</td><td><input id='"+info+"'></td></tr>"
}

function readData(){
    var table = document.getElementById('myTable');
    var rowLength = table.rows.length;
    // alert(rowLength);
    for(var i=0;i<rowLength;i++){
        document.getElementById("testArea").value+=table.rows[i].cells[0].innerHTML;
        document.getElementById("testArea").value+=table.rows[i].cells[1].querySelector('input').value;
    }
}
</script>
<style>
    caption{
        text-align: center;
    }
</style>
</head>

<body>
<table border = 0>
    <td style="padding-right: 20px;">
        <table>
        <caption>Table Operations</caption>
        <td>
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Create Table
                <span class="caret"></span></button>
                <ul class="dropdown-menu">
                    <li><button id="createTableButton" value="Create Table" onclick="createMovies();" class="btn btn-success" >Create Movie Table</li>
                    <li><button id="" value="Create Table" onclick="createMusics()" class="btn btn-danger" >Create Music Table</li>
                </ul>
            </div>
        </td>
        <td>
            <div class="dropdown">
                <button class="btn btn-danger dropdown-toggle" type="button" data-toggle="dropdown">Delete Table
                <span class="caret"></span></button>
                <ul class="dropdown-menu">
                    <li><button id="deleteTableButton" value="Delete Table" onclick="deleteMovies();" class="btn btn-success" >Delete Movie Table</li>
                    <li><button id="" value="Create Table" onclick="deleteMusics()" class="btn btn-danger" >Delete Music Table</li>
                </ul>
            </div>
        </td>
        <td>
            <!-- <div class="dropdown">
                <button class="btn btn-danger dropdown-toggle" type="button" data-toggle="dropdown">Show List Table
                <span class="caret"></span></button>
                <ul class="dropdown-menu">
                    <li><button id="listTablebutton" value="List Tables" onclick="listMovies();" class="btn btn-success" >List Movie Table</li>
                    <li><button id="" value="Create Table" onclick="listMusics()" class="btn btn-danger" >List Music Table</li>
                </ul>
            </div> -->
            <button class="btn btn-info dropdown-toggle" type="button" data-toggle="dropdown" onclick="listOfTables();">Show List Table
        </td>
        </table>
    </td>
    <td style="padding-right: 20px;">
        <table>
            <caption>CRUD Operations</caption>
            <td>
                <div class="dropdown">
                    <button class="btn btn-success dropdown-toggle" type="button" data-toggle="dropdown">Create Item
                    <span class="caret"></span></button>
                    <ul class="dropdown-menu">
                        <table id="myTable">
                            <tr>
                                <td>Title</td>
                                <td><input id="Title"></td>
                            </tr>
     
                            <tr>
                                <td>Year</td>
                                <td><input id="Year"></td>
                            </tr>    
                        </table>
                        <li><button id="addMoreInfo" type="button" onclick="myFunction()">Add Info: </button><input placeholder="New Info" id="newInfo"></li>
                        <li>
                            <button class="btn btn-info" onclick="createItem('Movies')" >Movie</button>
                            <button class="btn btn-default" onclick="createItem('Musics')">Music</button>
                        </li>
                    </ul>
                </div>
            </td>
            <td><input id="readItem" type="button" value="Read Item" onclick="readItem();" /></td>
            <td><input id="updateItem" type="button" value="Update Item" onclick="updateItem();" />
                <td><input id="deleteItem" type="button" value="Delete Item" onclick="deleteItem();" /></td>
            </td>
        </table>
    </td>
    <td style="padding-right: 20px;">
        <table border = 1>
            <caption>Query and Scan</caption>
            <td></td>
            <td>
                    <!-- <div class="dropdown">
                            <button class="btn btn-success dropdown-toggle" type="button" data-toggle="dropdown">Create Item
                            <span class="caret"></span></button>
                            <ul class="dropdown-menu">
                            </ul>
                    </div> -->
                <input id="queryData" type="button" value="Query" onclick="queryData();" /></td>
            <td><input id="scanData" type="button" value="Scan" onclick="scanData();" /></td>
        </table>
    </td>
    <td>
        <table border = 1>
            <caption>Import JSON</caption>
            <td><input type="file" id="fileinput" accept='application/json'/></td>
        </table>
    </td>
</table>

<br>
<textarea  id= "testArea" style="width:30%; height:75%"></textarea>
<textarea readonly id= "textarea" style="width:50%; height:75%"></textarea>


<script>
document.getElementById('fileinput').addEventListener('change', processFile, false);
</script>
</body>
</html>
